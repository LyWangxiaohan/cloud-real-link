# 一、数据库性能优化

数据库性能优化是没有定式的，需要根据具体业务和具体原因进行分析。我们可以分为两个方面考虑。
- 不分库分表
  - 软优化
    - 数据库参数调优
      - 一般是运营那边在做，mysql本身有缓存还有池化
    * 分析慢查询SQL语句，分析执行计划，进行sql改写和程序改写
      * 慢查询会导致链接被占用，耗时很久
    * 优化数据库索引结构
    * 优化数据表结构优化
    * 引入NOSQL和程序架构调整（解决问题的多数方法）
      * 搭建主从结构，数据从主复制。大多数业务都是读多写少。所以我们让读请求下放到从库去，写请求才下放到主库
      * 读写分离也有复制的延迟的问题，看能不能接收
      * NOSQL比如我们可以搭建一个EL，然后让数据复制过去，搞一个宽表，请求可以直接过去。
  * 硬优化
    - 提升系统硬件
- 分库分表
  - 需要根据业务来决定分库分表的策略，并没有通用的解决方法（**考虑业务热点**）
    - 需要结合领域特征，比如说电商、物流等等，并且和partitionKey和库表结构都有很强的关联
    - 比如外卖，每个城市都不一样，而且一线城市的数据一定比三线高，存在热点城市
    - 比如一个app，一开始的时候用户很少，后面因为功能的提升，用户增加会指数上涨，不能根据时间分库
  - 先看只分表是否满足业务的需求和未来增长
    * 数据库分表能够解决单表数据量很大的时,数据查询的效率问题，
    * 无法给数据库的并发操作带来效率上的提高，分表的实质还是在一个数据库上进行的操作，受数据库IO性能的限制（这里一定要问清楚为什么慢）
    